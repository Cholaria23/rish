<?php

use Illuminate\Database\Schema\Blueprint;
use Illuminate\Database\Migrations\Migration;

class CreateFiles extends Migration
{
    /**
     * Run the migrations.
     *
     * @return void
     */
    public function up() {
        DB::table('sections')->insert([
            [
                'alias' => 'files',
                'lang_name' => 'AdminPanel::main.sections.files',
                'route' => 'admin.files.index',
            ]
        ]);  

        Schema::create('files', function (Blueprint $table) {
            $table->increments('id');
            $table->string('src', 255)->nullable();
            $table->string('extention', 255)->nullable();
            $table->boolean('is_hidden')->default(1); 
            $table->integer('sort_order')->default(0);
            $table->string('password', 255)->nullable();
            $table->softDeletes();
            $table->timestamps();
        });

        Schema::create('files_lang', function (Blueprint $table) {
            $table->increments('id');
            $table->integer('file_id')->unsigned()->index();
            $table->string('lang', 2)->default('ru');
            $table->string('name', 255)->nullable();
            $table->string('description', 255)->nullable();
        });

        Schema::table('files_lang', function(Blueprint $table) {
            $table->foreign('file_id', 'files_lang_1')->references('id')->on('files')->onUpdate('CASCADE')->onDelete('CASCADE');
        });

        Schema::create('brandbook_icons', function (Blueprint $table) {
            $table->increments('id');
            $table->string('extention', 255)->nullable();
            $table->string('icon_src', 255)->nullable();
            $table->text('svg', 255)->nullable();
        });

        DB::table('brandbook_icons')->insert([
            ['extention' => "docx", 'icon_src' => "docx.png", 'svg' => '<svg xmlns="http://www.w3.org/2000/svg" width="34.999" height="39.999" viewBox="0 0 34.999 39.999"><g transform="translate(-32)"><path d="M98.5,0A2.506,2.506,0,0,0,96,2.5v35A2.506,2.506,0,0,0,98.5,40h24.974a2.506,2.506,0,0,0,2.5-2.5V10l-9.99-10Z" transform="translate(-58.97)" fill="#e2e5e7"/><path d="M354.515,10.061h7.545L352,0V7.545A2.523,2.523,0,0,0,354.515,10.061Z" transform="translate(-295.061)" fill="#b0b7bd"/><path d="M391.545,135.546,384,128h7.545Z" transform="translate(-324.546 -118.014)" fill="#cad1d8"/><path d="M61.969,253.833a1.257,1.257,0,0,1-1.249,1.258H33.249A1.257,1.257,0,0,1,32,253.833V241.258A1.257,1.257,0,0,1,33.249,240H60.72a1.257,1.257,0,0,1,1.249,1.258Z" transform="translate(0 -221.319)" fill="#50bee8"/><g transform="translate(36.067 22.802)"><path d="M84.438,302.43a.63.63,0,0,1-.694-.624V296.1a.683.683,0,0,1,.694-.624h2.3c4.6,0,4.493,6.958.089,6.958Zm.634-5.732v4.5h1.669c2.715,0,2.835-4.5,0-4.5Z" transform="translate(-83.744 -295.22)" fill="#fff"/><path d="M183.552,299.582a3.511,3.511,0,0,1-3.792-3.621,3.7,3.7,0,0,1,7.391,0A3.507,3.507,0,0,1,183.552,299.582Zm-.111-6a2.384,2.384,0,1,0,2.393,2.383A2.3,2.3,0,0,0,183.441,293.58Z" transform="translate(-172.213 -292.272)" fill="#fff"/><path d="M288.848,296.777a3.385,3.385,0,0,1,3.53-3.609,3.286,3.286,0,0,1,2.3.9.652.652,0,1,1-.9.944,1.735,1.735,0,0,0-1.407-.552,2.173,2.173,0,0,0-2.291,2.323,2.211,2.211,0,0,0,2.291,2.393,2.349,2.349,0,0,0,1.569-.644.675.675,0,0,1,.924.121.694.694,0,0,1-.111.944,3.649,3.649,0,0,1-5.913-2.816Z" transform="translate(-272.727 -293.098)" fill="#fff"/></g><path d="M119.692,417.258H96v1.258h23.692a1.256,1.256,0,0,0,1.247-1.258V416A1.256,1.256,0,0,1,119.692,417.258Z" transform="translate(-58.97 -383.546)" fill="#cad1d8"/></g></svg>'],
            ['extention' => "pdf", 'icon_src' => "pdf.png", 'svg' => '<svg xmlns="http://www.w3.org/2000/svg" width="35" height="40" viewBox="0 0 35 40"><g transform="translate(-32)"><path d="M98.495,0A2.5,2.5,0,0,0,96,2.5v35A2.5,2.5,0,0,0,98.495,40h24.949a2.5,2.5,0,0,0,2.495-2.5V10L115.959,0Z" transform="translate(-58.938)" fill="#e2e5e7"/><path d="M354.531,10.123h7.593L352,0V7.593A2.538,2.538,0,0,0,354.531,10.123Z" transform="translate(-295.123)" fill="#b0b7bd"/><path d="M391.593,135.593,384,128h7.593Z" transform="translate(-324.593 -118.028)" fill="#cad1d8"/><path d="M61.938,253.92a1.26,1.26,0,0,1-1.247,1.265H33.247A1.26,1.26,0,0,1,32,253.92V241.265A1.26,1.26,0,0,1,33.247,240H60.691a1.26,1.26,0,0,1,1.247,1.265Z" transform="translate(0 -221.389)" fill="#f15642"/><g transform="translate(37.365 22.934)"><path d="M101.744,295.019a.7.7,0,0,1,.687-.7h2.337a2.53,2.53,0,0,1,0,5.059h-1.689v1.336a.635.635,0,0,1-.648.7.682.682,0,0,1-.687-.7Zm1.335.576v2.521h1.689a1.261,1.261,0,0,0,0-2.521Z" transform="translate(-101.744 -294.32)" fill="#fff"/><path d="M188.523,302.474a.633.633,0,0,1-.7-.626V296.1a.688.688,0,0,1,.7-.628h2.317c4.624,0,4.523,7,.091,7Zm.638-5.767v4.533h1.679c2.732,0,2.854-4.533,0-4.533Z" transform="translate(-181.016 -295.381)" fill="#fff"/><path d="M288.46,296.773v1.608h2.58a.782.782,0,0,1,.729.717.7.7,0,0,1-.729.607h-2.58v2.125a.6.6,0,0,1-.606.626.643.643,0,0,1-.717-.626v-5.748a.639.639,0,0,1,.717-.628h3.552a.631.631,0,0,1,.709.628.7.7,0,0,1-.709.688H288.46Z" transform="translate(-272.474 -295.366)" fill="#fff"/></g><path d="M119.633,417.265H96v1.265h23.633a1.258,1.258,0,0,0,1.244-1.265V416A1.258,1.258,0,0,1,119.633,417.265Z" transform="translate(-58.938 -383.593)" fill="#cad1d8"/></g></svg>'],
            ['extention' => "xlsx", 'icon_src' => "xlsx.png", 'svg' => '<svg xmlns="http://www.w3.org/2000/svg" width="35" height="40" viewBox="0 0 35 40"><g transform="translate(-32)"><path d="M98.5,0A2.507,2.507,0,0,0,96,2.5v35A2.507,2.507,0,0,0,98.5,40h24.993a2.507,2.507,0,0,0,2.5-2.5V10l-10-10Z" transform="translate(-58.991)" fill="#e2e5e7"/><path d="M354.5,10.017h7.513L352,0V7.513A2.512,2.512,0,0,0,354.5,10.017Z" transform="translate(-295.017)" fill="#b0b7bd"/><path d="M391.513,135.513,384,128h7.513Z" transform="translate(-324.513 -118.004)" fill="#cad1d8"/><path d="M61.991,253.774a1.255,1.255,0,0,1-1.25,1.252H33.25A1.255,1.255,0,0,1,32,253.774V241.252A1.255,1.255,0,0,1,33.25,240H60.742a1.255,1.255,0,0,1,1.25,1.252Z" transform="translate(0 -221.27)" fill="#84bd5a"/><g transform="translate(37.71 22.757)"><path d="M108.287,297.481l1.742-2.183c.521-.681,1.533.189.962.84-.6.711-1.231,1.483-1.832,2.273l2.042,2.543a.657.657,0,1,1-1.091.73l-1.843-2.363-1.812,2.414c-.511.73-1.643-.09-1.072-.771l2.012-2.553c-.631-.791-1.242-1.561-1.852-2.273a.648.648,0,1,1,1-.819Z" transform="translate(-105.226 -294.759)" fill="#fff"/><path d="M197.36,295.955a.624.624,0,0,1,.631-.611.611.611,0,0,1,.591.611v5.016h2.723a.661.661,0,1,1,0,1.311h-3.313a.6.6,0,0,1-.631-.61v-5.717Z" transform="translate(-190.15 -295.036)" fill="#fff"/><path d="M270.663,293.228c.23-1.943,3.163-2.293,4.545-1.231a.586.586,0,1,1-.641.98c-.741-.47-2.423-.69-2.633.349-.27,1.643,4.085.7,4.014,3.366-.07,2.543-3.754,2.6-5.136,1.461a.74.74,0,0,1-.14-.982.591.591,0,0,1,.892-.069c.82.56,2.934.98,3.083-.442C274.517,295.181,270.352,296.072,270.663,293.228Z" transform="translate(-257.608 -291.407)" fill="#fff"/></g><path d="M119.734,417.252H96V418.5h23.734a1.254,1.254,0,0,0,1.249-1.252V416A1.254,1.254,0,0,1,119.734,417.252Z" transform="translate(-58.991 -383.513)" fill="#cad1d8"/></g></svg>'],
            ['extention' => "file", 'icon_src' => "", 'svg' => '<svg xmlns="http://www.w3.org/2000/svg" width="35" height="40" viewBox="0 0 35 40"><g transform="translate(-240 -401)"><path d="M98.471,0A2.493,2.493,0,0,0,96,2.5v35A2.493,2.493,0,0,0,98.471,40h24.715a2.493,2.493,0,0,0,2.471-2.5V10L115.772,0Z" transform="translate(149.342 401)" fill="#e2e5e7"/><path d="M354.522,10.09h7.567L352,0V7.567A2.53,2.53,0,0,0,354.522,10.09Z" transform="translate(-87.09 401)" fill="#b0b7bd"/><path d="M391.567,135.567,384,128h7.567Z" transform="translate(-116.567 282.979)" fill="#cad1d8"/><path d="M119.382,417.261H96v1.261h23.382a1.25,1.25,0,0,0,1.231-1.261V416A1.25,1.25,0,0,1,119.382,417.261Z" transform="translate(149.342 17.433)" fill="#cad1d8"/><path d="M61.955,253.873a1.258,1.258,0,0,1-1.248,1.261H33.248A1.258,1.258,0,0,1,32,253.873V241.261A1.258,1.258,0,0,1,33.248,240H60.707a1.258,1.258,0,0,1,1.248,1.261Z" transform="translate(208 180)" fill="#f7b84e"/><g transform="translate(245 424)"><path d="M109.3,302.45a.616.616,0,0,1-.626-.626V296.1a.61.61,0,0,1,.626-.626h3.62a.656.656,0,1,1,0,1.31h-2.9V298.3h2.541a.661.661,0,1,1,0,1.322h-2.541v1.512h3.076a.662.662,0,1,1,0,1.32Z" transform="translate(-92.672 -295.472)" fill="#fff"/><path d="M306.88,295.776a.67.67,0,0,1,1.339,0v5.787a.67.67,0,0,1-1.339,0Z" transform="translate(-299.88 -295.141)" fill="#fff"/><path d="M288.46,296.773v1.608h2.58a.782.782,0,0,1,.729.717.7.7,0,0,1-.729.607h-2.58v2.125a.6.6,0,0,1-.606.626.643.643,0,0,1-.717-.626v-5.748a.639.639,0,0,1,.717-.628h3.552a.631.631,0,0,1,.709.628.7.7,0,0,1-.709.688H288.46Z" transform="translate(-287.136 -295.456)" fill="#fff"/><path d="M197.36,295.955a.624.624,0,0,1,.631-.611.611.611,0,0,1,.591.611v5.016h2.723a.661.661,0,1,1,0,1.311h-3.313a.6.6,0,0,1-.631-.61v-5.717Z" transform="translate(-187.36 -295.344)" fill="#fff"/></g></g></svg>'],
            ['extention' => "jpg", 'icon_src' => "xlsx.png", 'svg' => '<svg xmlns="http://www.w3.org/2000/svg" width="35" height="40" viewBox="0 0 35 40"><g transform="translate(-32)"><path d="M98.5,0A2.508,2.508,0,0,0,96,2.5v35A2.508,2.508,0,0,0,98.5,40h25.017a2.508,2.508,0,0,0,2.5-2.5V10L116.013,0Z" transform="translate(-59.02)" fill="#e2e5e7"/><path d="M354.49,9.96h7.47L352,0V7.47A2.5,2.5,0,0,0,354.49,9.96Z" transform="translate(-294.96)" fill="#b0b7bd"/><path d="M391.47,135.47,384,128h7.47Z" transform="translate(-324.47 -117.991)" fill="#cad1d8"/><path d="M62.02,253.695a1.252,1.252,0,0,1-1.251,1.245H33.251A1.252,1.252,0,0,1,32,253.695v-12.45A1.252,1.252,0,0,1,33.251,240H60.769a1.252,1.252,0,0,1,1.251,1.245Z" transform="translate(0 -221.205)" fill="#50bee8"/><g transform="translate(37.088 22.927)"><path d="M100.862,295.715a.658.658,0,0,1,1.315,0v3.932a2.213,2.213,0,0,1-2.469,2.51,2.5,2.5,0,0,1-2.17-1.026c-.508-.608.448-1.483.966-.847a1.481,1.481,0,0,0,1.3.617c.557-.02,1.046-.27,1.056-1.255v-3.932Z" transform="translate(-97.394 -294.941)" fill="#fff"/><path d="M181.344,295.007a.685.685,0,0,1,.677-.687h2.3a2.489,2.489,0,0,1,0,4.977h-1.662v1.315a.625.625,0,0,1-.637.686.672.672,0,0,1-.677-.686v-5.6Zm1.315.566v2.48h1.662a1.241,1.241,0,0,0,0-2.48Z" transform="translate(-174.812 -294.233)" fill="#fff"/><path d="M271.191,299.5a3.771,3.771,0,0,1-2.449.837,3.282,3.282,0,0,1-3.574-3.564,3.548,3.548,0,0,1,3.663-3.572,3.259,3.259,0,0,1,2.27.875.645.645,0,0,1-.865.956,2.1,2.1,0,0,0-1.4-.627,2.372,2.372,0,0,0-2.368,2.368,2.2,2.2,0,0,0,2.28,2.37,2.542,2.542,0,0,0,1.493-.448V297.47h-1.493a.608.608,0,1,1,0-1.215h1.991a.681.681,0,0,1,.706.588v2.12A.8.8,0,0,1,271.191,299.5Z" transform="translate(-252.113 -293.2)" fill="#fff"/></g><path d="M119.788,417.245H96v1.245h23.788a1.252,1.252,0,0,0,1.252-1.245V416A1.252,1.252,0,0,1,119.788,417.245Z" transform="translate(-59.02 -383.47)" fill="#cad1d8"/></g></svg>'],
            ['extention' => "jpeg", 'icon_src' => "xlsx.png", 'svg' => '<svg xmlns="http://www.w3.org/2000/svg" width="35" height="40" viewBox="0 0 35 40"><g transform="translate(-32)"><path d="M98.5,0A2.508,2.508,0,0,0,96,2.5v35A2.508,2.508,0,0,0,98.5,40h25.017a2.508,2.508,0,0,0,2.5-2.5V10L116.013,0Z" transform="translate(-59.02)" fill="#e2e5e7"/><path d="M354.49,9.96h7.47L352,0V7.47A2.5,2.5,0,0,0,354.49,9.96Z" transform="translate(-294.96)" fill="#b0b7bd"/><path d="M391.47,135.47,384,128h7.47Z" transform="translate(-324.47 -117.991)" fill="#cad1d8"/><path d="M62.02,253.695a1.252,1.252,0,0,1-1.251,1.245H33.251A1.252,1.252,0,0,1,32,253.695v-12.45A1.252,1.252,0,0,1,33.251,240H60.769a1.252,1.252,0,0,1,1.251,1.245Z" transform="translate(0 -221.205)" fill="#50bee8"/><g transform="translate(37.088 22.927)"><path d="M100.862,295.715a.658.658,0,0,1,1.315,0v3.932a2.213,2.213,0,0,1-2.469,2.51,2.5,2.5,0,0,1-2.17-1.026c-.508-.608.448-1.483.966-.847a1.481,1.481,0,0,0,1.3.617c.557-.02,1.046-.27,1.056-1.255v-3.932Z" transform="translate(-97.394 -294.941)" fill="#fff"/><path d="M181.344,295.007a.685.685,0,0,1,.677-.687h2.3a2.489,2.489,0,0,1,0,4.977h-1.662v1.315a.625.625,0,0,1-.637.686.672.672,0,0,1-.677-.686v-5.6Zm1.315.566v2.48h1.662a1.241,1.241,0,0,0,0-2.48Z" transform="translate(-174.812 -294.233)" fill="#fff"/><path d="M271.191,299.5a3.771,3.771,0,0,1-2.449.837,3.282,3.282,0,0,1-3.574-3.564,3.548,3.548,0,0,1,3.663-3.572,3.259,3.259,0,0,1,2.27.875.645.645,0,0,1-.865.956,2.1,2.1,0,0,0-1.4-.627,2.372,2.372,0,0,0-2.368,2.368,2.2,2.2,0,0,0,2.28,2.37,2.542,2.542,0,0,0,1.493-.448V297.47h-1.493a.608.608,0,1,1,0-1.215h1.991a.681.681,0,0,1,.706.588v2.12A.8.8,0,0,1,271.191,299.5Z" transform="translate(-252.113 -293.2)" fill="#fff"/></g><path d="M119.788,417.245H96v1.245h23.788a1.252,1.252,0,0,0,1.252-1.245V416A1.252,1.252,0,0,1,119.788,417.245Z" transform="translate(-59.02 -383.47)" fill="#cad1d8"/></g></svg>'],
        ]);

    }

    /**
     * Reverse the migrations.
     *
     * @return void
     */
    public function down() {
        Schema::table('files_lang', function (Blueprint $table) {
            $table->dropForeign('files_lang_1');
        });

        DB::table('sections')->where('alias', 'files')->delete();
        Schema::dropIfExists('files_lang');
        Schema::dropIfExists('files');
        Schema::dropIfExists('brandbook_icons');
    }
}
